<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Tor با ProxyChains و مرورگر Tor | وبلاگ حسین سلمانی</title>
<meta name="keywords" content="tor, آموزشی, نرم‌افزار آزاد">
<meta name="description" content="درود به همگی، امیدوارم حال دلتون خوب باشه. ^^ این اولین پست وبلاگمه. در کل قراره توی این وبلاگ درمورد همه چیز بنویسم که البته تمرکزم روی محتوای متنی آموزشی مرتبط با موضوعات فنی هست. هدفم اینه چیزایی که بلدم رو با شما به اشتراک بگذارم، همونطور که دیگران دانشی که داشتن رو آزادانه به اشتراک گذاشتن و ما استفاده کردیم! بنظرم این یکی از باحال ترین چرخه‌های موجوده :)">
<meta name="author" content="حسین سلمانی">
<link rel="canonical" href="//localhost:1313/posts/tor-via-proxychains-tor-browser/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.34b1b457734e03475750f1ead14079410c92309b186a206fca5d3a23acc0f7c0.css" integrity="sha256-NLG0V3NOA0dXUPHq0UB5QQySMJsYaiBvyl06I6zA98A=" rel="preload stylesheet" as="style">
<link rel="icon" href="//localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="//localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="//localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="//localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="//localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="fa" href="//localhost:1313/posts/tor-via-proxychains-tor-browser/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="//localhost:1313/" accesskey="h" title="وبلاگ حسین سلمانی (Alt + H)">وبلاگ حسین سلمانی</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="//localhost:1313/" title="خانه">
                    <span>خانه</span>
                </a>
            </li>
            <li>
                <a href="//localhost:1313/tags" title="تگ‌ها">
                    <span>تگ‌ها</span>
                </a>
            </li>
            <li>
                <a href="//localhost:1313/archives" title="آرشیو">
                    <span>آرشیو</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Tor با ProxyChains و مرورگر Tor
    </h1>
    <div class="post-meta"><span title='2025-04-02 10:51:05 +0330 +0330'>آوریل 2, 2025</span>&nbsp;·&nbsp;6 دقیقه&nbsp;·&nbsp;حسین سلمانی

</div>
  </header> 
  <div class="post-content"><p>درود به همگی، امیدوارم حال دلتون خوب باشه. ^^ این اولین پست وبلاگمه. در کل قراره توی این وبلاگ درمورد همه چیز بنویسم که البته تمرکزم روی محتوای متنی آموزشی مرتبط با موضوعات فنی هست. هدفم اینه چیزایی که بلدم رو با شما به اشتراک بگذارم، همونطور که دیگران دانشی که داشتن رو آزادانه به اشتراک گذاشتن و ما استفاده کردیم! بنظرم این یکی از باحال ترین چرخه‌های موجوده :)</p>
<p>قبل شروع این مورد رو اضافه کنم موارد فنی که راجبشون توی وبلاگم مینویسم بیشتر مرتبط با نرم‌افزار‌های آزاد و سیستم‌عامل گنو/لینوکس هست. خودمم گنو/لینوکسی‌ام و روی همین سیستم‌عامل چیزایی که بلدم رو با شما به اشتراگ میگذارم. امیدوارم لذتش رو ببرید.</p>
<p>خب بریم سراغ بحث اصلی. تا حالا شده نیاز داشته باشید ترافیک نرم‌افزار‌هایی که از طریق کامند لاین اجرا میکنید رو به سمت Tor بفرستید؟ اگر آره یعنی ممکنه در این مورد مطالعه کرده باشید و بدونید با TorDaemon سروکار خواهید داشت. و البته torsocks، usewithtor و یا torify.</p>
<p>یک نکته رو هم بگم. من از این مواردی که نام بردم استفاده نمیکنم و شناخت عمیقی هم از این‌‌ها ندارم. همچنین ممکنه ابزار‌های دیگه‌ای وجود داشته باشند که از هر نظر برای این مورد بهتر باشن. بالاخره هر کدوم از این‌ها خوبی‌ها و بدی‌های خودشون رو ممکنه داشته باشن. حتی این روشی که قراره درموردش توضیح بدم از یک سری جهات میتونه بهترین نباشه و یا حتی بدترین باشه! اما اگر دنبال یک راه خیلی ساده و سریع برای انجام این کار هستید، این روش میتونه خیلی خوب باشه. بخصوص اگه مبتدی باشید چون که موارد بالا نیازمند کانفیگ بصورت دستی هست. توی این مسیر هم احتمال اینکه به باگ های مختلفی بخورید صفر نیست.</p>
<p>خب برای شروع به مرورگر Tor و ابزار proxychains یا proxychains4 نیاز دارید. برای دانلود مرورگر Tor یه سر به <a href="https://www.torproject.org/download/">این</a> صفحه بزنید و نسخه گنو/لینوکس رو دانلود کنید. همچنین مراحلی که بعد از دانلود باید طی کنید در <a href="https://tb-manual.torproject.org/installation/">اینجا</a> توضیح داده شده. جهت اطلاع برای کسایی که شاید ندونن باید بگم سایت Tor فیلتره! یادتون نره قند شکن خودتون رو از قبل روشن کنید :)</p>
<p>ابزار proxychains یا proxychains4 با پکیج منیجر apt به راحتی قابل نصبه. البته شک ندارم که از طریق پکیج منیجر‌های دیگه هم قابل نصبه. برای مثال اگر از آرچ استفاده میکنید، این ابزار روی مخازن aur و pacman موجوده. برای این پست از proxychains4 استفاده میکنم. برای نصب فقط کافیه دستور زیر رو در ترمینال اجرا کنید. البته قبل از نصب لیست پکیج‌های مخزن رو بروزرسانی میکنیم.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt update <span style="color:#f92672">&amp;&amp;</span> sudo apt install proxychains4 -y
</span></span></code></pre></div><p>حالا که ابزار‌های مورد نیاز رو نصب کردید بگذارید خیلی ساده توضیح بدم که قراره چیکار کنیم. در واقع قراره ترافیک ابزار‌هایی که از طریق کامند لاین اجرا میکنیم رو بفرستیم به سمت Tor که ابزار proxychains4 این کار رو برامون انجام میده. اونم به طرز خیلی بامزه و ساده!</p>
<p>در مرحله اول باید مرورگر Tor رو اجرا کنید. بعد از اجرا به طور خودکار سعی میکنه که به شبکه Tor وصل بشه. نمیخوام زیاد روی این موضوع عمیق بشم ولی جاهایی که Tor بلاک هست باید از bridge برای وصل شدن به شبکه Tor استفاده کنیم. مرورگر Tor سه مدل bridge از نوع built-in داره. دو مدل اول بیشتر مورد استفاده قرار میگیرن یعنی obsf4 و snowflake که از طریق منوی settings و بخش Connection قابل انتخابن. اگر توی این مسیر به مشکل خوردید مستندات رسمی و یا راه های موجود در فروم‌ها رو مطالعه کنید. (دست به سرچ خوبی داشته باشید!)</p>
<p>بعد از اینکه مرورگر Tor رو اجرا کردید و با موفقیت به شبکه Tor وصل شدید وقتشه که بفهمیم روی کدوم پورت اجرا شده. خود سرویس Tor به تنهایی بطور پیشفرض روی پورت 9050 و اون سرویس Tor که به واسطه مروگر Tor اجرا میشه روی پورت 9150 قرار داره اما بهتره که بررسی کنیم و ببینیم در واقع روی کدوم پورت هست. با دستور زیر میتونید به راحتی لیستی از نرم‌افزارهایی که دارن از پورت بخصوصی استفاده میکنند رو ببینید.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo netstat -plntu
</span></span></code></pre></div><p>اگر ابزار netstat رو ندارید باید net-tools رو نصب کنید. net-tools شامل ابزار‌های کامند لاینی معروف و کاربردی مرتبط با شبکه هست. از جمله ifconfig و یا route و غیره.</p>
<p>با دستور زیر میتونید net-tools رو نصب کنید.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt install net-tools
</span></span></code></pre></div><p>دقت کنید توی لیستی که دستور netstat بالا بهتون میده هم TorBrowser هست و هم Tor. ما کاری به پورت TorBrowser نداریم و باید به پورت tor توجه کنیم. با دستور زیر میتونیم به چیزی که دنبالش هستیم برسیم.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo netstat -plntu | grep -E <span style="color:#e6db74">&#39;tor|9150&#39;</span>
</span></span></code></pre></div><p><img alt="image" loading="lazy" src="1.png"></p>
<p>خب حالا که فهمیدیم سرویس Tor در واقع روی آدرس loopback یا همون 127.0.0.1 و پورت 9150 قرار داره وقتشه که بعنوان یک پروکسی به فایل کانفیگ proxychains4 اضافش کنیم. توی این مرحله با هر ادیتوری که دوست دارید فایل proxychains4.conf رو باز کنید.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo nano /etc/proxychains4.conf
</span></span></code></pre></div><p>ببینید رفتار ابزار proxychains4 با لیست پروکسی که بهش میدید قابل تنظیمه. چندین حالت داره که توضیحات هر کدوم بصورت کامنت موجود هستند که میتونید اون‌‌ها رو مطالعه کنید. مورد اول که باید انجام بدیم uncomment کردن dynamic_chain و quiet_mode هست. مورد دوم اینه که آدرس سرویس Tor رو بعنوان یک پروکسی از نوع socks به انتهای فایل اضافه کنید. من ترجیح میدم از socks5 استفاده کنم. طبق عکس زیر پروکسی رو به انتهای فایل اضافه کنید.</p>
<p><img alt="Alt Text" loading="lazy" src="2.png"></p>
<p>خب همه مواردی که نیاز بود رو انجام دادیم. وقتشه که یه تست کوچیک انجام بدیم. بطور کل روش کار با ابزار proxychains4 اینطوره که باید قبل از نوشتن یه کامند از کامند proxychains استفاده کنید. برای مثال میخوایم آدرس IP نوع Public خودمون رو با ابزار curl و سایت جالب icanhazip.com پیدا کنیم. خب در حالت عادی برای اینکار باید از کامند زیر استفاده کرد.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl icanhazip.com
</span></span></code></pre></div><p>در حالتی که بخوایم از proxychains4 استفاده کنیم باید از این کامند استفاده کنیم. این کامند همون کاری رو میکنه که کامند قبلی کرد ولی با یک تفاوت جالب! خود curl بعنوان یک agent عمل میکنه. درخواست ما به کمک proxychains4 فوروارد میشه به سرویس Tor، یعنی پورت 9150 در آدرس loopback ما. در اینجا خود Tor شامل node ورودی و خروجی بعلاوه node های میانی میشه. آدرس node خروجی ما همون آدرسیه که مقصد نهایی از ما بدست میاره. در این موقعیت سایت icanhazip.com فقط آدرس node خروجی رو میبینه و نمایش میده، نه آدرس اصلی ما رو.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>proxychains curl icanhazip.com
</span></span></code></pre></div><p>تبریک میگم! به همین راحتی موفق شدید که توی کامند لاین ترافیک ابزار‌ها رو بفرستید سمت Tor اونم با یک راه ساده، سریع و مقداری خلاقانه! امیدوارم محتوای این پست براتون مفید بوده باشه، نهایت لذت رو برده باشید و توی کارتون از چیزی که الان یاد گرفتید نهایت استفاده رو ببرید. ^^</p>
<hr>
<p><strong>راستی اگر دوست داشتید میتونید منو به یه قهوه دعوت کنید :)</strong></p>
<p><strong>این بهم کمک میکنه که با انرژی و قدرت بیشتری ادامه بدم&hellip;</strong></p>
<p><a href="https://coffeebede.com/numblxrd">منو به یک قهوه دعوت کن!</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="//localhost:1313/tags/tor/">Tor</a></li>
      <li><a href="//localhost:1313/tags/%D8%A2%D9%85%D9%88%D8%B2%D8%B4%DB%8C/">آموزشی</a></li>
      <li><a href="//localhost:1313/tags/%D9%86%D8%B1%D9%85%D8%A7%D9%81%D8%B2%D8%A7%D8%B1-%D8%A2%D8%B2%D8%A7%D8%AF/">نرم‌افزار آزاد</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="//localhost:1313/posts/selling-free-software/">
    <span class="title">« صفحه قبلی</span>
    <br>
    <span>فروش نرم‌افزار آزاد</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="//localhost:1313/">وبلاگ حسین سلمانی</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'کپی';

        function copyingDone() {
            copybutton.innerHTML = 'کپی شد!';
            setTimeout(() => {
                copybutton.innerHTML = 'کپی';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
